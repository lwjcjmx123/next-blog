---
title: "å‰ç«¯ç›‘æ§ä¸æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼šæ„å»ºå®Œæ•´çš„æ€§èƒ½ç›‘æ§ä½“ç³»"
slug: "frontend-monitoring-performance"
excerpt: "æ·±å…¥æ¢è®¨å‰ç«¯æ€§èƒ½ç›‘æ§çš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼Œä»æ•°æ®é‡‡é›†åˆ°åˆ†æä¼˜åŒ–ï¼Œæ„å»ºä¼ä¸šçº§çš„æ€§èƒ½ç›‘æ§ä½“ç³»ã€‚"
date: "2024-06-01"
published: true
category: "æŠ€æœ¯"
tags: ["æ€§èƒ½ç›‘æ§", "å‰ç«¯å¼€å‘", "æ€§èƒ½ä¼˜åŒ–"]
author: "hailong"
readingTime: 20
---

## å¼•è¨€

åœ¨æ•°å­—åŒ–æ—¶ä»£ï¼Œç”¨æˆ·å¯¹Webåº”ç”¨çš„æ€§èƒ½è¦æ±‚è¶Šæ¥è¶Šé«˜ã€‚æ®ç»Ÿè®¡ï¼Œé¡µé¢åŠ è½½æ—¶é—´æ¯å¢åŠ 1ç§’ï¼Œç”¨æˆ·æµå¤±ç‡å°±ä¼šå¢åŠ 7%ï¼Œè½¬åŒ–ç‡ä¸‹é™11%ã€‚å› æ­¤ï¼Œå‰ç«¯æ€§èƒ½ç›‘æ§å·²ç»ä»å¯é€‰é¡¹å˜æˆäº†å¿…éœ€å“ï¼Œå®ƒä¸ä»…å…³ä¹ç”¨æˆ·ä½“éªŒï¼Œæ›´ç›´æ¥å½±å“ä¸šåŠ¡æ”¶ç›Šã€‚

ä¸€ä¸ªå®Œå–„çš„å‰ç«¯ç›‘æ§ä½“ç³»å°±åƒæ˜¯åº”ç”¨çš„"å¥åº·ä½“æ£€ç³»ç»Ÿ"ï¼Œå®ƒèƒ½å¤Ÿï¼š
- **å®æ—¶æ„ŸçŸ¥**ï¼š7x24å°æ—¶ç›‘æ§åº”ç”¨æ€§èƒ½çŠ¶æ€
- **å¿«é€Ÿå®šä½**ï¼šç²¾å‡†è¯†åˆ«æ€§èƒ½ç“¶é¢ˆå’Œé—®é¢˜æ ¹æº
- **æ•°æ®é©±åŠ¨**ï¼šåŸºäºçœŸå®ç”¨æˆ·æ•°æ®åˆ¶å®šä¼˜åŒ–ç­–ç•¥
- **é¢„è­¦æœºåˆ¶**ï¼šåœ¨é—®é¢˜å½±å“ç”¨æˆ·å‰åŠæ—¶å‘ç°å¹¶å¤„ç†

æœ¬æ–‡å°†æ·±å…¥æ¢è®¨å¦‚ä½•æ„å»ºä¸€ä¸ªä¼ä¸šçº§çš„å‰ç«¯æ€§èƒ½ç›‘æ§ä½“ç³»ï¼Œä»æ ¸å¿ƒæŒ‡æ ‡åˆ°å®æ–½ç­–ç•¥ï¼Œå¸®åŠ©ä½ å»ºç«‹å®Œæ•´çš„æ€§èƒ½ç›‘æ§è§£å†³æ–¹æ¡ˆã€‚

> ğŸ’¡ **å®æ—¶æ¼”ç¤º**ï¼šæƒ³è¦äº²è‡ªä½“éªŒæ€§èƒ½ç›‘æ§çš„æ•ˆæœå—ï¼Ÿç‚¹å‡»è®¿é—®æˆ‘ä»¬çš„ [æ€§èƒ½ç›‘æ§å®æ—¶æ¼”ç¤ºé¡µé¢](/performance-demo)ï¼Œå¯ä»¥å®æ—¶æŸ¥çœ‹ Web Vitals æŒ‡æ ‡çš„ç›‘æ§è¿‡ç¨‹ã€‚

## æ€§èƒ½ç›‘æ§çš„æ ¸å¿ƒæŒ‡æ ‡ä½“ç³»

### ä¸ºä»€ä¹ˆéœ€è¦æ ‡å‡†åŒ–çš„æ€§èƒ½æŒ‡æ ‡ï¼Ÿ

åœ¨è¿‡å»ï¼Œå‰ç«¯æ€§èƒ½ç›‘æ§å¾€å¾€å„è‡ªä¸ºæ”¿ï¼Œä¸åŒå›¢é˜Ÿä½¿ç”¨ä¸åŒçš„æŒ‡æ ‡ï¼Œå¯¼è‡´æ•°æ®éš¾ä»¥å¯¹æ¯”å’Œåˆ†æã€‚Googleæå‡ºçš„Web Vitalsæ ‡å‡†åŒ–äº†ç”¨æˆ·ä½“éªŒçš„è¡¡é‡æ–¹å¼ï¼Œä¸ºæ•´ä¸ªè¡Œä¸šæä¾›äº†ç»Ÿä¸€çš„æ€§èƒ½è¯„ä¼°æ¡†æ¶ã€‚

Web Vitalså…³æ³¨ä¸‰ä¸ªæ ¸å¿ƒç»´åº¦ï¼š
- **åŠ è½½æ€§èƒ½**ï¼šå†…å®¹å¤šå¿«èƒ½è¢«ç”¨æˆ·çœ‹åˆ°
- **äº¤äº’æ€§èƒ½**ï¼šç”¨æˆ·æ“ä½œå¤šå¿«èƒ½å¾—åˆ°å“åº”
- **è§†è§‰ç¨³å®šæ€§**ï¼šé¡µé¢å†…å®¹æ˜¯å¦ä¼šæ„å¤–ç§»åŠ¨

### Web Vitals ä¸‰å¤§æ ¸å¿ƒæŒ‡æ ‡è¯¦è§£

#### 1. Largest Contentful Paint (LCP) - æœ€å¤§å†…å®¹ç»˜åˆ¶

**ä»€ä¹ˆæ˜¯LCPï¼Ÿ**

LCPæµ‹é‡é¡µé¢ä¸»è¦å†…å®¹çš„åŠ è½½é€Ÿåº¦ï¼Œå…·ä½“æŒ‡è§†çª—å†…æœ€å¤§çš„å†…å®¹å…ƒç´ å®Œæˆæ¸²æŸ“çš„æ—¶é—´ç‚¹ã€‚è¿™ä¸ªæŒ‡æ ‡ç›´æ¥åæ˜ äº†ç”¨æˆ·æ„ŸçŸ¥çš„é¡µé¢åŠ è½½é€Ÿåº¦ã€‚

**ä¸ºä»€ä¹ˆLCPé‡è¦ï¼Ÿ**
- ç”¨æˆ·é€šå¸¸é€šè¿‡ä¸»è¦å†…å®¹åˆ¤æ–­é¡µé¢æ˜¯å¦"åŠ è½½å®Œæˆ"
- LCPä¸ç”¨æˆ·æ»¡æ„åº¦é«˜åº¦ç›¸å…³
- æ˜¯æœç´¢å¼•æ“æ’åçš„é‡è¦å› ç´ 

**LCPçš„è¯„åˆ†æ ‡å‡†ï¼š**
- **ä¼˜ç§€**ï¼šâ‰¤ 2.5ç§’
- **éœ€è¦æ”¹è¿›**ï¼š2.5-4.0ç§’
- **è¾ƒå·®**ï¼š> 4.0ç§’

**å¸¸è§çš„LCPå…ƒç´ åŒ…æ‹¬ï¼š**
- å¤§å‹å›¾ç‰‡
- è§†é¢‘å°é¢
- å¤§å‹æ–‡æœ¬å—
- èƒŒæ™¯å›¾ç‰‡

**PerformanceObserver API è¯¦è§£**

PerformanceObserver æ˜¯ç°ä»£æµè§ˆå™¨æä¾›çš„å¼ºå¤§æ€§èƒ½ç›‘æ§APIï¼Œå®ƒå¯ä»¥è§‚å¯Ÿé¡µé¢çš„å„é¡¹æ€§èƒ½æŒ‡æ ‡ã€‚ç›¸æ¯”ä¼ ç»Ÿçš„ `performance.getEntries()` æ–¹æ³•ï¼ŒPerformanceObserver æä¾›äº†å®æ—¶ã€å¼‚æ­¥çš„æ€§èƒ½æ•°æ®ç›‘å¬èƒ½åŠ›ã€‚

**æ”¯æŒçš„æ€§èƒ½æŒ‡æ ‡ç±»å‹ï¼š**
- `paint`: ç»˜åˆ¶äº‹ä»¶ï¼ˆfirst-paint, first-contentful-paintï¼‰
- `largest-contentful-paint`: æœ€å¤§å†…å®¹ç»˜åˆ¶
- `first-input`: é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ
- `layout-shift`: å¸ƒå±€åç§»
- `longtask`: é•¿ä»»åŠ¡
- `navigation`: é¡µé¢å¯¼èˆª
- `resource`: èµ„æºåŠ è½½

```javascript
// LCP ç›‘æ§æ ¸å¿ƒå®ç°
class LCPMonitor {
  constructor() {
    this.observer = new PerformanceObserver((list) => {
      const entries = list.getEntries();
      const lastEntry = entries[entries.length - 1];
      
      // è®°å½•LCPæ•°æ®
      this.reportLCP({
        value: lastEntry.startTime,
        element: this.getElementInfo(lastEntry.element)
      });
    });
    
    // æ£€æŸ¥æµè§ˆå™¨æ”¯æŒ
    if ('PerformanceObserver' in window) {
      try {
        this.observer.observe({ entryTypes: ['largest-contentful-paint'] });
      } catch (error) {
        console.warn('LCP monitoring not supported:', error);
      }
    }
  }
}
```

> ğŸ’¡ **å®è·µæç¤º**ï¼šåœ¨æˆ‘ä»¬çš„ [æ€§èƒ½ç›‘æ§æ¼”ç¤ºé¡µé¢](/performance-demo) ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ° PerformanceObserver çš„å®æ—¶å·¥ä½œæ•ˆæœï¼ŒåŒ…æ‹¬å„ç§æ€§èƒ½æŒ‡æ ‡çš„å®æ—¶ç›‘æ§å’Œæ•°æ®å±•ç¤ºã€‚
```

#### 2. First Input Delay (FID) - é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ

**ä»€ä¹ˆæ˜¯FIDï¼Ÿ**

FIDæµ‹é‡ç”¨æˆ·é¦–æ¬¡ä¸é¡µé¢äº¤äº’ï¼ˆå¦‚ç‚¹å‡»é“¾æ¥ã€æŒ‰é’®æˆ–è‡ªå®šä¹‰æ§ä»¶ï¼‰åˆ°æµè§ˆå™¨å®é™…å¼€å§‹å¤„ç†è¯¥äº¤äº’ä¹‹é—´çš„æ—¶é—´ã€‚è¿™ä¸ªæŒ‡æ ‡åæ˜ äº†é¡µé¢çš„äº¤äº’å“åº”æ€§ã€‚

**FIDçš„é‡è¦æ€§ï¼š**
- ç›´æ¥å½±å“ç”¨æˆ·çš„äº¤äº’ä½“éªŒ
- åæ˜ ä¸»çº¿ç¨‹çš„ç¹å¿™ç¨‹åº¦
- ä¸ç”¨æˆ·çš„æŒ«è´¥æ„Ÿå¯†åˆ‡ç›¸å…³

**FIDçš„è¯„åˆ†æ ‡å‡†ï¼š**
- **ä¼˜ç§€**ï¼šâ‰¤ 100æ¯«ç§’
- **éœ€è¦æ”¹è¿›**ï¼š100-300æ¯«ç§’
- **è¾ƒå·®**ï¼š> 300æ¯«ç§’

**å½±å“FIDçš„ä¸»è¦å› ç´ ï¼š**
- JavaScriptæ‰§è¡Œæ—¶é—´è¿‡é•¿
- å¤§å‹ç¬¬ä¸‰æ–¹è„šæœ¬
- å¤æ‚çš„DOMæ“ä½œ
- é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡

**ä¼˜åŒ–FIDçš„ç­–ç•¥ï¼š**
- åˆ†è§£é•¿ä»»åŠ¡
- å»¶è¿ŸåŠ è½½éå…³é”®JavaScript
- ä½¿ç”¨Web Workerså¤„ç†è®¡ç®—å¯†é›†å‹ä»»åŠ¡
- ä¼˜åŒ–ç¬¬ä¸‰æ–¹ä»£ç 

> ğŸ’¡ **å®æ—¶ä½“éªŒ**ï¼šåœ¨æˆ‘ä»¬çš„ [æ€§èƒ½ç›‘æ§æ¼”ç¤ºé¡µé¢](/performance-demo) ä¸­ï¼Œä½ å¯ä»¥å®æ—¶è§‚å¯Ÿ FID æŒ‡æ ‡çš„å˜åŒ–ï¼Œä½“éªŒä¸åŒäº¤äº’åœºæ™¯ä¸‹çš„é¦–æ¬¡è¾“å…¥å»¶è¿Ÿç›‘æ§æ•ˆæœã€‚

```javascript
// FID ç›‘æ§å®ç°
class FIDMonitor {
  constructor() {
    const observer = new PerformanceObserver((list) => {
      const firstInput = list.getEntries()[0];
      const fid = firstInput.processingStart - firstInput.startTime;
      
      this.reportFID({
        value: fid,
        eventType: firstInput.name,
        target: firstInput.target,
        timestamp: Date.now()
      });
    });
    
    // æ£€æŸ¥æµè§ˆå™¨æ”¯æŒå¹¶å¯åŠ¨ç›‘æ§
    if ('PerformanceObserver' in window && 
        PerformanceObserver.supportedEntryTypes?.includes('first-input')) {
      observer.observe({ entryTypes: ['first-input'] });
    }
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const fidMonitor = new FIDMonitor();
```

#### 3. Cumulative Layout Shift (CLS) - ç´¯ç§¯å¸ƒå±€åç§»

**ä»€ä¹ˆæ˜¯CLSï¼Ÿ**

CLSæµ‹é‡é¡µé¢æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…æ‰€æœ‰æ„å¤–å¸ƒå±€åç§»çš„ç´¯ç§¯åˆ†æ•°ã€‚å½“å¯è§å…ƒç´ åœ¨ä¸¤ä¸ªæ¸²æŸ“å¸§ä¹‹é—´æ”¹å˜ä½ç½®æ—¶ï¼Œå°±ä¼šå‘ç”Ÿå¸ƒå±€åç§»ã€‚

**CLSçš„é‡è¦æ€§ï¼š**
- ç›´æ¥å½±å“ç”¨æˆ·çš„è§†è§‰ä½“éªŒ
- é˜²æ­¢ç”¨æˆ·è¯¯æ“ä½œï¼ˆå¦‚ç‚¹å‡»é”™è¯¯çš„æŒ‰é’®ï¼‰
- åæ˜ é¡µé¢çš„è§†è§‰ç¨³å®šæ€§

**CLSçš„è¯„åˆ†æ ‡å‡†ï¼š**
- **ä¼˜ç§€**ï¼šâ‰¤ 0.1
- **éœ€è¦æ”¹è¿›**ï¼š0.1-0.25
- **è¾ƒå·®**ï¼š> 0.25

**å¸¸è§çš„CLSé—®é¢˜åŸå› ï¼š**
- æ²¡æœ‰å°ºå¯¸çš„å›¾ç‰‡å’Œè§†é¢‘
- åŠ¨æ€æ’å…¥çš„å†…å®¹
- Webå­—ä½“å¯¼è‡´çš„æ–‡æœ¬é—ªçƒ
- å¼‚æ­¥åŠ è½½çš„å¹¿å‘Šæˆ–ç»„ä»¶

**ä¼˜åŒ–CLSçš„æœ€ä½³å®è·µï¼š**
- ä¸ºå›¾ç‰‡å’Œè§†é¢‘è®¾ç½®æ˜ç¡®çš„å°ºå¯¸
- ä¸ºåŠ¨æ€å†…å®¹é¢„ç•™ç©ºé—´
- ä½¿ç”¨font-displayä¼˜åŒ–å­—ä½“åŠ è½½
- é¿å…åœ¨ç°æœ‰å†…å®¹ä¸Šæ–¹æ’å…¥å†…å®¹

> ğŸ’¡ **å¸ƒå±€ç¨³å®šæ€§æ¼”ç¤º**ï¼šè®¿é—®æˆ‘ä»¬çš„ [æ€§èƒ½ç›‘æ§æ¼”ç¤ºé¡µé¢](/performance-demo)ï¼Œå¯ä»¥çœ‹åˆ° CLS æŒ‡æ ‡å¦‚ä½•å®æ—¶ç›‘æ§é¡µé¢å¸ƒå±€åç§»ï¼Œä»¥åŠä¸åŒå¸ƒå±€å˜åŒ–å¯¹ç”¨æˆ·ä½“éªŒçš„å½±å“ã€‚

```javascript
// CLS ç›‘æ§æ ¸å¿ƒå®ç°
class CLSMonitor {
  constructor() {
    let clsValue = 0;
    
    const observer = new PerformanceObserver((list) => {
      list.getEntries().forEach(entry => {
        // åªç»Ÿè®¡éç”¨æˆ·è¾“å…¥å¯¼è‡´çš„å¸ƒå±€åç§»
        if (!entry.hadRecentInput) {
          clsValue += entry.value;
          this.reportCLS({ 
            value: clsValue, 
            sources: entry.sources,
            timestamp: Date.now()
          });
        }
      });
    });
    
    // æ£€æŸ¥æµè§ˆå™¨æ”¯æŒå¹¶å¯åŠ¨ç›‘æ§
    if ('PerformanceObserver' in window && 
        PerformanceObserver.supportedEntryTypes?.includes('layout-shift')) {
      observer.observe({ entryTypes: ['layout-shift'] });
    }
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const clsMonitor = new CLSMonitor();
```

### æ‰©å±•æ€§èƒ½ç›‘æ§æŒ‡æ ‡

é™¤äº†Web Vitalsæ ¸å¿ƒæŒ‡æ ‡å¤–ï¼Œä¸€ä¸ªå®Œæ•´çš„æ€§èƒ½ç›‘æ§ä½“ç³»è¿˜éœ€è¦å…³æ³¨æ›´å¤šç»´åº¦çš„æ•°æ®ï¼Œä»¥å…¨é¢äº†è§£åº”ç”¨çš„æ€§èƒ½çŠ¶å†µã€‚

#### 1. èµ„æºåŠ è½½æ€§èƒ½ç›‘æ§

**ä¸ºä»€ä¹ˆéœ€è¦ç›‘æ§èµ„æºåŠ è½½ï¼Ÿ**

èµ„æºåŠ è½½æ˜¯å½±å“é¡µé¢æ€§èƒ½çš„å…³é”®å› ç´ ã€‚é€šè¿‡ç›‘æ§å„ç±»èµ„æºçš„åŠ è½½æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ï¼š
- è¯†åˆ«åŠ è½½ç¼“æ…¢çš„èµ„æº
- å‘ç°ç½‘ç»œè¿æ¥é—®é¢˜
- ä¼˜åŒ–èµ„æºåŠ è½½ç­–ç•¥
- è¯„ä¼°CDNæ•ˆæœ

**å…³é”®ç›‘æ§æŒ‡æ ‡ï¼š**
- **DNSæŸ¥è¯¢æ—¶é—´**ï¼šåŸŸåè§£æè€—æ—¶
- **TCPè¿æ¥æ—¶é—´**ï¼šå»ºç«‹è¿æ¥è€—æ—¶
- **SSLæ¡æ‰‹æ—¶é—´**ï¼šHTTPSè¿æ¥å»ºç«‹è€—æ—¶
- **é¦–å­—èŠ‚æ—¶é—´(TTFB)**ï¼šæœåŠ¡å™¨å“åº”æ—¶é—´
- **å†…å®¹ä¸‹è½½æ—¶é—´**ï¼šèµ„æºä¼ è¾“è€—æ—¶
- **èµ„æºå¤§å°**ï¼šä¼ è¾“å­—èŠ‚æ•°
- **ç¼“å­˜å‘½ä¸­ç‡**ï¼šç¼“å­˜ä½¿ç”¨æƒ…å†µ

**æ€§èƒ½é—®é¢˜è¯†åˆ«ï¼š**
- å¤§æ–‡ä»¶è­¦å‘Šï¼šè¶…è¿‡1MBçš„èµ„æº
- æ…¢é€ŸåŠ è½½ï¼šè¶…è¿‡3ç§’çš„èµ„æº
- DNSé—®é¢˜ï¼šè¶…è¿‡200msçš„åŸŸåè§£æ
- æœåŠ¡å™¨é—®é¢˜ï¼šè¶…è¿‡800msçš„TTFB

```javascript
// èµ„æºç›‘æ§æ ¸å¿ƒå®ç°
class ResourceMonitor {
  constructor() {
    const observer = new PerformanceObserver((list) => {
      list.getEntries().forEach(resource => {
        this.analyzeResource({
          name: resource.name,
          type: this.getResourceType(resource),
          size: resource.transferSize,
          timing: {
            dns: resource.domainLookupEnd - resource.domainLookupStart,
            ttfb: resource.responseStart - resource.requestStart,
            download: resource.responseEnd - resource.responseStart
          }
        });
      });
    });
    
    observer.observe({ entryTypes: ['resource'] });
  }
}
```

#### 2. ç”¨æˆ·è¡Œä¸ºä¸ä½“éªŒç›‘æ§

**ç”¨æˆ·è¡Œä¸ºç›‘æ§çš„ä»·å€¼**

ç”¨æˆ·è¡Œä¸ºæ•°æ®èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ç†è§£ç”¨æˆ·å¦‚ä½•ä¸åº”ç”¨äº¤äº’ï¼Œå‘ç°ç”¨æˆ·ä½“éªŒä¸­çš„ç—›ç‚¹ï¼Œå¹¶ä¸ºäº§å“ä¼˜åŒ–æä¾›æ•°æ®æ”¯æ’‘ã€‚

**æ ¸å¿ƒç›‘æ§ç»´åº¦ï¼š**

**äº¤äº’è¡Œä¸ºç›‘æ§ï¼š**
- ç‚¹å‡»äº‹ä»¶ï¼šç”¨æˆ·ç‚¹å‡»äº†å“ªäº›å…ƒç´ 
- æ»šåŠ¨è¡Œä¸ºï¼šç”¨æˆ·æµè§ˆæ·±åº¦å’Œåœç•™æ—¶é—´
- è¡¨å•äº¤äº’ï¼šè¾“å…¥ã€æäº¤ã€æ”¾å¼ƒç‡
- é¡µé¢è·³è½¬ï¼šç”¨æˆ·è®¿é—®è·¯å¾„åˆ†æ

**ä¼šè¯è´¨é‡ç›‘æ§ï¼š**
- ä¼šè¯æ—¶é•¿ï¼šç”¨æˆ·åœ¨é¡µé¢åœç•™æ—¶é—´
- è·³å‡ºç‡ï¼šå•é¡µé¢è®¿é—®æ¯”ä¾‹
- é¡µé¢å¯è§æ€§ï¼šç”¨æˆ·æ˜¯å¦çœŸæ­£åœ¨æŸ¥çœ‹é¡µé¢
- è®¾å¤‡ä¿¡æ¯ï¼šå±å¹•å°ºå¯¸ã€ç½‘ç»œçŠ¶å†µç­‰

**é”™è¯¯ç›‘æ§ï¼š**
- JavaScriptè¿è¡Œæ—¶é”™è¯¯
- Promiseæœªæ•è·å¼‚å¸¸
- èµ„æºåŠ è½½å¤±è´¥
- ç½‘ç»œè¯·æ±‚é”™è¯¯

**ç›‘æ§å®æ–½ç­–ç•¥ï¼š**

1. **é‡‡æ ·ç­–ç•¥**ï¼šé¿å…100%é‡‡é›†é€ æˆæ€§èƒ½è´Ÿæ‹…
2. **éšç§ä¿æŠ¤**ï¼šæ•æ„Ÿä¿¡æ¯è„±æ•å¤„ç†
3. **æ‰¹é‡ä¸ŠæŠ¥**ï¼šå‡å°‘ç½‘ç»œè¯·æ±‚é¢‘æ¬¡
4. **ç¦»çº¿ç¼“å­˜**ï¼šç½‘ç»œå¼‚å¸¸æ—¶æœ¬åœ°å­˜å‚¨

**å®æ–½è¦ç‚¹ï¼š**
- é€‰æ‹©å…³é”®ç”¨æˆ·è¡Œä¸ºè¿›è¡Œç›‘æ§
- å»ºç«‹ç”¨æˆ·è¡Œä¸ºä¸æ€§èƒ½æŒ‡æ ‡çš„å…³è”
- é€šè¿‡A/Bæµ‹è¯•éªŒè¯ä¼˜åŒ–æ•ˆæœ
- å®šæœŸåˆ†æç”¨æˆ·è¡Œä¸ºæ¨¡å¼å˜åŒ–

#### 3. ç½‘ç»œæ€§èƒ½ç›‘æ§

**ç½‘ç»œç¯å¢ƒå¯¹æ€§èƒ½çš„å½±å“**

ç½‘ç»œæ¡ä»¶æ˜¯å½±å“Webåº”ç”¨æ€§èƒ½çš„é‡è¦å› ç´ ï¼Œç‰¹åˆ«æ˜¯åœ¨ç§»åŠ¨è®¾å¤‡å’Œå¼±ç½‘ç¯å¢ƒä¸‹ã€‚æœ‰æ•ˆçš„ç½‘ç»œç›‘æ§èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ï¼š

**ç½‘ç»œçŠ¶å†µæ„ŸçŸ¥ï¼š**
- è¿æ¥ç±»å‹è¯†åˆ«ï¼ˆWiFiã€4Gã€3Gç­‰ï¼‰
- ç½‘ç»œé€Ÿåº¦è¯„ä¼°ï¼ˆä¸‹è¡Œå¸¦å®½ã€RTTå»¶è¿Ÿï¼‰
- ç½‘ç»œè´¨é‡å˜åŒ–ç›‘æ§
- çœæµé‡æ¨¡å¼æ£€æµ‹

**è¯·æ±‚æ€§èƒ½åˆ†æï¼š**
- APIè¯·æ±‚å“åº”æ—¶é—´
- è¯·æ±‚æˆåŠŸç‡ç»Ÿè®¡
- é”™è¯¯ç±»å‹åˆ†å¸ƒ
- é‡è¯•æœºåˆ¶æ•ˆæœ

**é€‚åº”æ€§ä¼˜åŒ–ç­–ç•¥ï¼š**
- å¼±ç½‘ç¯å¢ƒä¸‹çš„é™çº§æ–¹æ¡ˆ
- èµ„æºåŠ è½½ä¼˜å…ˆçº§è°ƒæ•´
- ç¼“å­˜ç­–ç•¥åŠ¨æ€è°ƒæ•´
- ç”¨æˆ·ä½“éªŒä¿éšœæªæ–½

**ç›‘æ§å®æ–½è¦ç‚¹ï¼š**

1. **éä¾µå…¥å¼ç›‘æ§**ï¼šé¿å…å½±å“æ­£å¸¸ä¸šåŠ¡é€»è¾‘
2. **æ™ºèƒ½é‡‡æ ·**ï¼šæ ¹æ®ç½‘ç»œçŠ¶å†µè°ƒæ•´ç›‘æ§é¢‘ç‡
3. **å¼‚å¸¸æ£€æµ‹**ï¼šè¯†åˆ«ç½‘ç»œå¼‚å¸¸å’Œæ€§èƒ½çªå˜
4. **ç”¨æˆ·åˆ†ç¾¤**ï¼šä¸åŒç½‘ç»œç¯å¢ƒç”¨æˆ·çš„å·®å¼‚åŒ–åˆ†æ

```javascript
// ç½‘ç»œæ€§èƒ½ç›‘æ§æ ¸å¿ƒå®ç°
class NetworkMonitor {
  constructor() {
    this.connectionInfo = this.getConnectionInfo();
    this.monitorRequestPerformance();
  }
  
  getConnectionInfo() {
    const connection = navigator.connection;
    return connection ? {
      effectiveType: connection.effectiveType,
      downlink: connection.downlink,
      rtt: connection.rtt
    } : null;
  }
  
  monitorRequestPerformance() {
    // æ‹¦æˆªfetchè¯·æ±‚è¿›è¡Œæ€§èƒ½ç›‘æ§
    const originalFetch = window.fetch;
    window.fetch = async (...args) => {
      const startTime = performance.now();
      try {
        const response = await originalFetch(...args);
        this.recordRequest({
          duration: performance.now() - startTime,
          status: response.status,
          success: response.ok
        });
        return response;
      } catch (error) {
        this.recordRequest({
          duration: performance.now() - startTime,
          success: false
        });
        throw error;
      }
    };
  }
}
```

## ç›‘æ§æ•°æ®æ”¶é›†ä¸å¤„ç†

### æ•°æ®æ”¶é›†ç­–ç•¥

**ä¸ºä»€ä¹ˆéœ€è¦ç§‘å­¦çš„æ•°æ®æ”¶é›†ç­–ç•¥ï¼Ÿ**

æ€§èƒ½ç›‘æ§æ•°æ®çš„æ”¶é›†éœ€è¦åœ¨æ•°æ®å®Œæ•´æ€§å’Œç³»ç»Ÿæ€§èƒ½ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ã€‚è¿‡åº¦çš„æ•°æ®æ”¶é›†ä¼šå½±å“åº”ç”¨æ€§èƒ½ï¼Œè€Œæ•°æ®ä¸è¶³åˆ™æ— æ³•å‡†ç¡®åæ˜ çœŸå®æƒ…å†µã€‚

**æ ¸å¿ƒæ”¶é›†åŸåˆ™ï¼š**

**1. æ™ºèƒ½é‡‡æ ·ç­–ç•¥**
- **åˆ†å±‚é‡‡æ ·**ï¼šæ ¸å¿ƒæŒ‡æ ‡100%é‡‡é›†ï¼Œè¯¦ç»†æ•°æ®æŒ‰æ¯”ä¾‹é‡‡æ ·
- **ç”¨æˆ·åˆ†ç¾¤**ï¼šæ–°ç”¨æˆ·ã€VIPç”¨æˆ·ç­‰é‡è¦ç¾¤ä½“æé«˜é‡‡æ ·ç‡
- **å¼‚å¸¸äº‹ä»¶**ï¼šé”™è¯¯å’Œå¼‚å¸¸æƒ…å†µ100%é‡‡é›†
- **åŠ¨æ€è°ƒæ•´**ï¼šæ ¹æ®ç³»ç»Ÿè´Ÿè½½åŠ¨æ€è°ƒæ•´é‡‡æ ·ç‡

**2. æ•°æ®è´¨é‡ä¿è¯**
- **æ•°æ®éªŒè¯**ï¼šç¡®ä¿æ”¶é›†çš„æ•°æ®æ ¼å¼æ­£ç¡®ã€æ•°å€¼åˆç†
- **å»é‡å¤„ç†**ï¼šé¿å…é‡å¤æ•°æ®å½±å“åˆ†æç»“æœ
- **å¼‚å¸¸è¿‡æ»¤**ï¼šè¿‡æ»¤æ˜æ˜¾å¼‚å¸¸çš„æ•°æ®ç‚¹
- **å®Œæ•´æ€§æ£€æŸ¥**ï¼šç¡®ä¿å…³é”®å­—æ®µä¸ç¼ºå¤±

**3. æ€§èƒ½å‹å¥½çš„æ”¶é›†æ–¹å¼**
- **æ‰¹é‡å‘é€**ï¼šå‡å°‘ç½‘ç»œè¯·æ±‚é¢‘æ¬¡
- **å¼‚æ­¥å¤„ç†**ï¼šé¿å…é˜»å¡ä¸»çº¿ç¨‹
- **ç¦»çº¿ç¼“å­˜**ï¼šç½‘ç»œå¼‚å¸¸æ—¶æœ¬åœ°å­˜å‚¨
- **ä¼˜é›…é™çº§**ï¼šç›‘æ§ç³»ç»Ÿæ•…éšœä¸å½±å“ä¸šåŠ¡

**4. éšç§ä¸åˆè§„**
- **æ•°æ®è„±æ•**ï¼šæ•æ„Ÿä¿¡æ¯åŠ å¯†æˆ–è„±æ•å¤„ç†
- **ç”¨æˆ·æˆæƒ**ï¼šéµå¾ªéšç§æ”¿ç­–å’Œæ³•è§„è¦æ±‚
- **æ•°æ®æœ€å°åŒ–**ï¼šåªæ”¶é›†å¿…è¦çš„æ•°æ®
- **å®‰å…¨ä¼ è¾“**ï¼šä½¿ç”¨HTTPSç­‰å®‰å…¨åè®®

**å®æ–½å»ºè®®ï¼š**

1. **æ¸è¿›å¼éƒ¨ç½²**ï¼šä»æ ¸å¿ƒæŒ‡æ ‡å¼€å§‹ï¼Œé€æ­¥æ‰©å±•ç›‘æ§èŒƒå›´
2. **A/Bæµ‹è¯•**ï¼šå¯¹æ¯”ä¸åŒé‡‡æ ·ç‡å¯¹æ€§èƒ½çš„å½±å“
3. **ç›‘æ§ç›‘æ§ç³»ç»Ÿ**ï¼šç¡®ä¿ç›‘æ§ç³»ç»Ÿæœ¬èº«çš„ç¨³å®šæ€§
4. **å®šæœŸè¯„ä¼°**ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚è°ƒæ•´æ”¶é›†ç­–ç•¥

```javascript
// æ€§èƒ½æ•°æ®æ”¶é›†å™¨æ ¸å¿ƒå®ç°
class PerformanceCollector {
  constructor(config = {}) {
    this.config = {
      sampleRate: 0.1,
      batchSize: 50,
      endpoint: '/api/performance',
      ...config
    };
    this.buffer = [];
  }
  
  collect(data) {
    if (this.shouldSample()) {
      this.buffer.push(this.enrichData(data));
      if (this.buffer.length >= this.config.batchSize) {
        this.flush();
      }
    }
  }
}
```

### æœåŠ¡ç«¯æ•°æ®å¤„ç†

**æœåŠ¡ç«¯å¤„ç†çš„æ ¸å¿ƒèŒè´£**

æœåŠ¡ç«¯åœ¨æ€§èƒ½ç›‘æ§ä½“ç³»ä¸­æ‰¿æ‹…ç€æ•°æ®æ¥æ”¶ã€å¤„ç†ã€å­˜å‚¨å’Œåˆ†æçš„é‡è¦èŒè´£ã€‚ä¸€ä¸ªé«˜æ•ˆçš„æœåŠ¡ç«¯å¤„ç†ç³»ç»Ÿéœ€è¦å…·å¤‡ä»¥ä¸‹èƒ½åŠ›ï¼š

**1. æ•°æ®æ¥æ”¶ä¸éªŒè¯**
- **é«˜å¹¶å‘å¤„ç†**ï¼šæ”¯æŒå¤§é‡å®¢æˆ·ç«¯åŒæ—¶ä¸ŠæŠ¥æ•°æ®
- **æ•°æ®æ ¼å¼éªŒè¯**ï¼šç¡®ä¿æ¥æ”¶åˆ°çš„æ•°æ®æ ¼å¼æ­£ç¡®
- **é˜²é‡å¤å¤„ç†**ï¼šé¿å…é‡å¤æ•°æ®å½±å“åˆ†æç»“æœ
- **å¼‚å¸¸æ•°æ®è¿‡æ»¤**ï¼šè¿‡æ»¤æ˜æ˜¾å¼‚å¸¸çš„æ•°æ®ç‚¹

**2. æ•°æ®é¢„å¤„ç†ä¸ä¸°å¯Œ**
- **æ—¶é—´æˆ³æ ‡å‡†åŒ–**ï¼šç»Ÿä¸€æ—¶é—´æ ¼å¼ï¼Œå¤„ç†æ—¶åŒºå·®å¼‚
- **åœ°ç†ä½ç½®ä¿¡æ¯**ï¼šåŸºäºIPåœ°å€æ·»åŠ åœ°ç†ä½ç½®æ•°æ®
- **ç”¨æˆ·ä»£ç†è§£æ**ï¼šæå–æµè§ˆå™¨ã€æ“ä½œç³»ç»Ÿç­‰ä¿¡æ¯
- **ä¼šè¯å…³è”**ï¼šå°†åŒä¸€ç”¨æˆ·çš„å¤šæ¬¡è¯·æ±‚å…³è”èµ·æ¥

**3. æ™ºèƒ½å­˜å‚¨ç­–ç•¥**
- **åˆ†ç±»å­˜å‚¨**ï¼šä¸åŒç±»å‹çš„æ•°æ®ä½¿ç”¨ä¸åŒçš„å­˜å‚¨æ–¹æ¡ˆ
- **çƒ­å†·æ•°æ®åˆ†ç¦»**ï¼šè¿‘æœŸæ•°æ®å¿«é€Ÿè®¿é—®ï¼Œå†å²æ•°æ®å½’æ¡£
- **æ•°æ®å‹ç¼©**ï¼šå‡å°‘å­˜å‚¨ç©ºé—´å ç”¨
- **å¤‡ä»½ä¸æ¢å¤**ï¼šç¡®ä¿æ•°æ®å®‰å…¨æ€§

**4. å®æ—¶åˆ†æä¸å‘Šè­¦**
- **æµå¼å¤„ç†**ï¼šå®æ—¶åˆ†ææ•°æ®æµ
- **å¼‚å¸¸æ£€æµ‹**ï¼šè¯†åˆ«æ€§èƒ½å¼‚å¸¸å’Œè¶‹åŠ¿å˜åŒ–
- **æ™ºèƒ½å‘Šè­¦**ï¼šåŸºäºè§„åˆ™å’Œæœºå™¨å­¦ä¹ çš„å‘Šè­¦æœºåˆ¶
- **å‘Šè­¦é™å™ª**ï¼šé¿å…å‘Šè­¦é£æš´

**å­˜å‚¨æ¶æ„è®¾è®¡ï¼š**

**æ—¶åºæ•°æ®åº“**ï¼šç”¨äºå­˜å‚¨Web Vitalsç­‰æ—¶é—´åºåˆ—æ•°æ®
- ä¼˜åŠ¿ï¼šé«˜æ•ˆçš„æ—¶é—´èŒƒå›´æŸ¥è¯¢ã€è‡ªåŠ¨æ•°æ®èšåˆ
- é€‚ç”¨ï¼šLCPã€FIDã€CLSç­‰æ ¸å¿ƒæ€§èƒ½æŒ‡æ ‡

**åˆ†ææ•°æ®åº“**ï¼šç”¨äºå¤æ‚çš„å¤šç»´åˆ†æ
- ä¼˜åŠ¿ï¼šæ”¯æŒå¤æ‚æŸ¥è¯¢ã€å¤šç»´åº¦åˆ†æ
- é€‚ç”¨ï¼šç”¨æˆ·è¡Œä¸ºåˆ†æã€èµ„æºåŠ è½½åˆ†æ

**æœç´¢å¼•æ“**ï¼šç”¨äºæ—¥å¿—å’Œé”™è¯¯æ•°æ®
- ä¼˜åŠ¿ï¼šå…¨æ–‡æœç´¢ã€å®æ—¶ç´¢å¼•
- é€‚ç”¨ï¼šé”™è¯¯æ—¥å¿—ã€ç”¨æˆ·åé¦ˆ

```javascript
// æœåŠ¡ç«¯æ•°æ®å¤„ç†æ ¸å¿ƒå®ç°
const express = require('express');
const app = express();

// æ€§èƒ½æ•°æ®æ¥æ”¶ç«¯ç‚¹
app.post('/api/analytics', express.json(), async (req, res) => {
  try {
    const { metric, data } = req.body;
    
    // æ•°æ®éªŒè¯å’Œé¢„å¤„ç†
    const processedData = await preprocessData(metric, data);
    
    // å­˜å‚¨æ•°æ®
    await storeMetric(metric, processedData);
    
    // å®æ—¶å‘Šè­¦æ£€æŸ¥
    await checkAlerts(metric, processedData);
    
    res.status(200).json({ success: true });
  } catch (error) {
    console.error('Analytics processing error:', error);
    res.status(500).json({ error: 'Internal server error' });
  }
});

// æ•°æ®é¢„å¤„ç†
async function preprocessData(metric, data) {
  return {
    ...data,
    serverTimestamp: Date.now(),
    geo: await getGeoLocation(data.ip),
    browser: parseUserAgent(data.userAgent)
  };
}
```

## æ•°æ®å¯è§†åŒ–ä¸åˆ†æ

### å¯è§†åŒ–çš„é‡è¦æ€§

æ•°æ®å¯è§†åŒ–æ˜¯æ€§èƒ½ç›‘æ§ä½“ç³»çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå®ƒå°†å¤æ‚çš„æ€§èƒ½æ•°æ®è½¬åŒ–ä¸ºç›´è§‚æ˜“æ‡‚çš„å›¾è¡¨å’ŒæŠ¥å‘Šï¼Œå¸®åŠ©å›¢é˜Ÿå¿«é€Ÿè¯†åˆ«é—®é¢˜ã€åˆ†æè¶‹åŠ¿ã€åˆ¶å®šä¼˜åŒ–ç­–ç•¥ã€‚

**æ ¸å¿ƒå¯è§†åŒ–éœ€æ±‚ï¼š**

**1. å®æ—¶ç›‘æ§ä»ªè¡¨æ¿**
- **å…³é”®æŒ‡æ ‡æ¦‚è§ˆ**ï¼šWeb Vitalsæ ¸å¿ƒæŒ‡æ ‡çš„å®æ—¶çŠ¶æ€
- **è¶‹åŠ¿åˆ†æå›¾è¡¨**ï¼šæ€§èƒ½æŒ‡æ ‡çš„æ—¶é—´åºåˆ—å˜åŒ–
- **å‘Šè­¦çŠ¶æ€æ˜¾ç¤º**ï¼šå½“å‰æ´»è·ƒçš„æ€§èƒ½å‘Šè­¦
- **ç”¨æˆ·ä½“éªŒè¯„åˆ†**ï¼šç»¼åˆæ€§èƒ½è¯„åˆ†å’Œç­‰çº§

**2. æ·±åº¦åˆ†ææŠ¥å‘Š**
- **æ€§èƒ½åˆ†å¸ƒåˆ†æ**ï¼šä¸åŒç”¨æˆ·ç¾¤ä½“çš„æ€§èƒ½å·®å¼‚
- **é¡µé¢æ€§èƒ½å¯¹æ¯”**ï¼šä¸åŒé¡µé¢çš„æ€§èƒ½è¡¨ç°
- **è®¾å¤‡ç¯å¢ƒåˆ†æ**ï¼šä¸åŒè®¾å¤‡ã€ç½‘ç»œç¯å¢ƒçš„å½±å“
- **æ—¶é—´æ®µå¯¹æ¯”**ï¼šä¸åŒæ—¶é—´æ®µçš„æ€§èƒ½å˜åŒ–

**3. ä¸šåŠ¡å½±å“åˆ†æ**
- **æ€§èƒ½ä¸è½¬åŒ–ç‡å…³ç³»**ï¼šæ€§èƒ½æŒ‡æ ‡å¯¹ä¸šåŠ¡æŒ‡æ ‡çš„å½±å“
- **ç”¨æˆ·ç•™å­˜åˆ†æ**ï¼šæ€§èƒ½é—®é¢˜å¯¹ç”¨æˆ·ç•™å­˜çš„å½±å“
- **æ”¶å…¥å½±å“è¯„ä¼°**ï¼šæ€§èƒ½ä¼˜åŒ–çš„å•†ä¸šä»·å€¼
- **ç«å“å¯¹æ¯”åˆ†æ**ï¼šä¸ç«äº‰å¯¹æ‰‹çš„æ€§èƒ½å¯¹æ¯”

**å¯è§†åŒ–è®¾è®¡åŸåˆ™ï¼š**

**1. ä¿¡æ¯å±‚æ¬¡æ¸…æ™°**
- é‡è¦ä¿¡æ¯çªå‡ºæ˜¾ç¤º
- æ¬¡è¦ä¿¡æ¯é€‚å½“å¼±åŒ–
- ä½¿ç”¨é¢œè‰²ç¼–ç è¡¨ç¤ºçŠ¶æ€
- åˆç†çš„ä¿¡æ¯å¯†åº¦

**2. äº¤äº’ä½“éªŒå‹å¥½**
- æ”¯æŒæ—¶é—´èŒƒå›´é€‰æ‹©
- æä¾›é’»å–åˆ†æèƒ½åŠ›
- å“åº”å¼è®¾è®¡é€‚é…
- å¿«é€ŸåŠ è½½å’Œåˆ·æ–°

**3. æ•°æ®å‡†ç¡®å¯ä¿¡**
- æ•°æ®æ¥æºæ ‡æ³¨æ¸…æ™°
- è®¡ç®—æ–¹æ³•é€æ˜
- å¼‚å¸¸æ•°æ®ç‰¹æ®Šæ ‡è®°
- ç½®ä¿¡åŒºé—´æ˜¾ç¤º

**æŠ¥å‘Šè‡ªåŠ¨åŒ–ï¼š**

1. **å®šæœŸæŠ¥å‘Šç”Ÿæˆ**ï¼šæ¯æ—¥ã€æ¯å‘¨ã€æ¯æœˆçš„è‡ªåŠ¨æŠ¥å‘Š
2. **å¼‚å¸¸æŠ¥å‘Šæ¨é€**ï¼šæ€§èƒ½å¼‚å¸¸æ—¶çš„å³æ—¶é€šçŸ¥
3. **è¶‹åŠ¿é¢„æµ‹æŠ¥å‘Š**ï¼šåŸºäºå†å²æ•°æ®çš„è¶‹åŠ¿é¢„æµ‹
4. **ä¼˜åŒ–å»ºè®®æŠ¥å‘Š**ï¼šåŸºäºåˆ†æç»“æœçš„æ”¹è¿›å»ºè®®

```javascript
// æ€§èƒ½ç›‘æ§ä»ªè¡¨æ¿æ ¸å¿ƒç»„ä»¶
import React, { useState, useEffect } from 'react';

const PerformanceDashboard = () => {
  const [metrics, setMetrics] = useState(null);
  const [timeRange, setTimeRange] = useState('24h');

  useEffect(() => {
    loadDashboardData();
  }, [timeRange]);

  const loadDashboardData = async () => {
    const response = await fetch(`/api/analytics/dashboard?timeRange=${timeRange}`);
    const data = await response.json();
    setMetrics(data);
  };

  const getScoreColor = (score) => {
    if (score >= 90) return '#00C851';
    if (score >= 50) return '#FF8800';
    return '#FF4444';
  };

  return (
    <div className="performance-dashboard">
      <header className="dashboard-header">
        <h1>Performance Monitoring Dashboard</h1>
        <select value={timeRange} onChange={(e) => setTimeRange(e.target.value)}>
          <option value="1h">Last Hour</option>
          <option value="24h">Last 24 Hours</option>
          <option value="7d">Last 7 Days</option>
        </select>
      </header>

      {/* Web Vitals æ¦‚è§ˆ */}
      <section className="web-vitals-overview">
        <h2>Web Vitals</h2>
        <div className="vitals-grid">
          {['lcp', 'fid', 'cls'].map(vital => (
            <div key={vital} className="vital-card">
              <h3>{vital.toUpperCase()}</h3>
              <div 
                className="vital-score" 
                style={{ color: getScoreColor(metrics?.webVitals[vital]?.score) }}
              >
                {metrics?.webVitals[vital]?.value}
              </div>
            </div>
          ))}
        </div>
      </section>
    </div>
  );
};
```

## å‘Šè­¦ä¸é€šçŸ¥ç³»ç»Ÿ

**æ™ºèƒ½å‘Šè­¦çš„é‡è¦æ€§**

ä¸€ä¸ªæœ‰æ•ˆçš„å‘Šè­¦ç³»ç»Ÿæ˜¯æ€§èƒ½ç›‘æ§ä½“ç³»çš„ç¥ç»ä¸­æ¢ï¼Œå®ƒèƒ½å¤Ÿåœ¨æ€§èƒ½é—®é¢˜å‘ç”Ÿæ—¶åŠæ—¶é€šçŸ¥ç›¸å…³äººå‘˜ï¼Œç¡®ä¿é—®é¢˜å¾—åˆ°å¿«é€Ÿå“åº”å’Œè§£å†³ã€‚

**å‘Šè­¦ç³»ç»Ÿè®¾è®¡åŸåˆ™ï¼š**

**1. åˆ†çº§å‘Šè­¦ç­–ç•¥**
- **Criticalï¼ˆä¸¥é‡ï¼‰**ï¼šå½±å“æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½ï¼Œéœ€è¦ç«‹å³å¤„ç†
- **Warningï¼ˆè­¦å‘Šï¼‰**ï¼šæ€§èƒ½ä¸‹é™ä½†ä¸å½±å“åŸºæœ¬åŠŸèƒ½
- **Infoï¼ˆä¿¡æ¯ï¼‰**ï¼šéœ€è¦å…³æ³¨ä½†ä¸ç´§æ€¥çš„æ€§èƒ½å˜åŒ–

**2. å¤šç»´åº¦å‘Šè­¦è§„åˆ™**
- **é˜ˆå€¼å‘Šè­¦**ï¼šå•ä¸ªæŒ‡æ ‡è¶…è¿‡é¢„è®¾é˜ˆå€¼
- **è¶‹åŠ¿å‘Šè­¦**ï¼šæ€§èƒ½æŒ‡æ ‡æŒç»­æ¶åŒ–
- **å¼‚å¸¸æ£€æµ‹**ï¼šåŸºäºå†å²æ•°æ®çš„å¼‚å¸¸æ¨¡å¼è¯†åˆ«
- **ä¸šåŠ¡å½±å“å‘Šè­¦**ï¼šæ€§èƒ½é—®é¢˜å¯¹ä¸šåŠ¡æŒ‡æ ‡çš„å½±å“

**3. æ™ºèƒ½é™å™ªæœºåˆ¶**
- **å‘Šè­¦èšåˆ**ï¼šç›¸å…³å‘Šè­¦åˆå¹¶å¤„ç†
- **æŠ‘åˆ¶æœŸè®¾ç½®**ï¼šé¿å…é‡å¤å‘Šè­¦
- **åŠ¨æ€é˜ˆå€¼**ï¼šæ ¹æ®å†å²æ•°æ®è‡ªåŠ¨è°ƒæ•´é˜ˆå€¼
- **ä¸Šä¸‹æ–‡å…³è”**ï¼šç»“åˆä¸šåŠ¡åœºæ™¯åˆ¤æ–­å‘Šè­¦é‡è¦æ€§

**4. å¤šæ¸ é“é€šçŸ¥**
- **å³æ—¶é€šè®¯**ï¼šSlackã€é’‰é’‰ã€ä¼ä¸šå¾®ä¿¡
- **é‚®ä»¶é€šçŸ¥**ï¼šè¯¦ç»†çš„å‘Šè­¦æŠ¥å‘Š
- **çŸ­ä¿¡é€šçŸ¥**ï¼šç´§æ€¥æƒ…å†µä¸‹çš„å¿«é€Ÿé€šçŸ¥
- **ç”µè¯å‘Šè­¦**ï¼šä¸¥é‡é—®é¢˜çš„å‡çº§é€šçŸ¥

**å‘Šè­¦è§„åˆ™é…ç½®ç¤ºä¾‹ï¼š**

**Web Vitalså‘Šè­¦è§„åˆ™ï¼š**
- LCP > 2.5ç§’ï¼šWarningçº§åˆ«
- FID > 100msï¼šWarningçº§åˆ«
- CLS > 0.1ï¼šWarningçº§åˆ«
- ä»»ä¸€æŒ‡æ ‡è¿ç»­æ¶åŒ–ï¼šCriticalçº§åˆ«

**é”™è¯¯ç‡å‘Šè­¦è§„åˆ™ï¼š**
- 5åˆ†é’Ÿå†…é”™è¯¯ç‡ > 5%ï¼šCriticalçº§åˆ«
- 1å°æ—¶å†…é”™è¯¯ç‡ > 1%ï¼šWarningçº§åˆ«
- æ–°ç±»å‹é”™è¯¯å‡ºç°ï¼šInfoçº§åˆ«

**æ€§èƒ½è¶‹åŠ¿å‘Šè­¦è§„åˆ™ï¼š**
- æ€§èƒ½æŒ‡æ ‡è¾ƒå†å²å‡å€¼ä¸‹é™ > 20%ï¼šWarningçº§åˆ«
- è¿ç»­3ä¸ªæ—¶é—´æ®µæ€§èƒ½ä¸‹é™ï¼šCriticalçº§åˆ«
- ç‰¹å®šé¡µé¢æ€§èƒ½å¼‚å¸¸ï¼šInfoçº§åˆ«

**å®æ–½å»ºè®®ï¼š**

1. **æ¸è¿›å¼éƒ¨ç½²**ï¼šä»æ ¸å¿ƒæŒ‡æ ‡å¼€å§‹ï¼Œé€æ­¥å®Œå–„å‘Šè­¦è§„åˆ™
2. **å®šæœŸè°ƒä¼˜**ï¼šæ ¹æ®å‘Šè­¦æ•ˆæœè°ƒæ•´é˜ˆå€¼å’Œè§„åˆ™
3. **å›¢é˜ŸåŸ¹è®­**ï¼šç¡®ä¿å›¢é˜Ÿäº†è§£å‘Šè­¦å¤„ç†æµç¨‹
4. **æ–‡æ¡£å®Œå–„**ï¼šå»ºç«‹å‘Šè­¦å¤„ç†æ‰‹å†Œå’Œæœ€ä½³å®è·µ

```javascript
// æ™ºèƒ½å‘Šè­¦ç³»ç»Ÿæ ¸å¿ƒå®ç°
class AlertSystem {
  constructor() {
    this.rules = new Map();
    this.channels = new Map();
    this.suppressions = new Map();
    
    this.initializeDefaultRules();
  }
  
  initializeDefaultRules() {
    // LCPå‘Šè­¦è§„åˆ™
    this.addRule({
      id: 'lcp_threshold',
      metric: 'lcp',
      threshold: 2500,
      severity: 'warning',
      description: 'LCP exceeds 2.5 seconds'
    });
    
    // é”™è¯¯ç‡å‘Šè­¦
    this.addRule({
      id: 'error_rate',
      metric: 'error',
      threshold: 0.05, // 5%é”™è¯¯ç‡
      severity: 'critical',
      description: 'Error rate exceeds 5%'
    });
  }
  
  async checkAlert(metric, data) {
    const applicableRules = Array.from(this.rules.values())
      .filter(rule => rule.metric === metric);
    
    for (const rule of applicableRules) {
      if (this.evaluateRule(rule, data)) {
        await this.triggerAlert(rule, data);
      }
    }
  }
  
  evaluateRule(rule, data) {
    return (data.value || 0) > rule.threshold;
  }
  
  async triggerAlert(rule, data) {
    const alert = {
      rule: rule.id,
      severity: rule.severity,
      description: rule.description,
      value: data.value,
      timestamp: Date.now()
    };
    
    await this.sendNotifications(alert);
  }
}
```

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

**åŸºäºç›‘æ§æ•°æ®çš„ä¼˜åŒ–ç­–ç•¥**

æ€§èƒ½ç›‘æ§çš„æœ€ç»ˆç›®æ ‡æ˜¯æŒ‡å¯¼ä¼˜åŒ–å·¥ä½œã€‚é€šè¿‡åˆ†æç›‘æ§æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥è¯†åˆ«æ€§èƒ½ç“¶é¢ˆï¼Œåˆ¶å®šé’ˆå¯¹æ€§çš„ä¼˜åŒ–ç­–ç•¥ã€‚

### æ ¸å¿ƒWeb Vitalsä¼˜åŒ–

**LCPï¼ˆæœ€å¤§å†…å®¹ç»˜åˆ¶ï¼‰ä¼˜åŒ–ï¼š**

**æœåŠ¡ç«¯ä¼˜åŒ–ï¼š**
- å‡å°‘æœåŠ¡å™¨å“åº”æ—¶é—´ï¼ˆTTFB < 200msï¼‰
- ä½¿ç”¨CDNåŠ é€Ÿé™æ€èµ„æºåˆ†å‘
- å¯ç”¨HTTP/2å’ŒHTTP/3åè®®
- å®æ–½æ™ºèƒ½ç¼“å­˜ç­–ç•¥

**èµ„æºä¼˜åŒ–ï¼š**
- ä¼˜åŒ–å…³é”®è·¯å¾„èµ„æºåŠ è½½
- ä½¿ç”¨ç°ä»£å›¾ç‰‡æ ¼å¼ï¼ˆWebPã€AVIFï¼‰
- å®æ–½èµ„æºé¢„åŠ è½½å’Œé¢„è¿æ¥
- å‹ç¼©å’Œä¼˜åŒ–å­—ä½“æ–‡ä»¶

**æ¸²æŸ“ä¼˜åŒ–ï¼š**
- ä¼˜åŒ–CSSå…³é”®æ¸²æŸ“è·¯å¾„
- å‡å°‘æ¸²æŸ“é˜»å¡èµ„æº
- ä½¿ç”¨æœåŠ¡ç«¯æ¸²æŸ“æˆ–é™æ€ç”Ÿæˆ
- å®æ–½æ¸è¿›å¼åŠ è½½ç­–ç•¥

**FIDï¼ˆé¦–æ¬¡è¾“å…¥å»¶è¿Ÿï¼‰ä¼˜åŒ–ï¼š**

**JavaScriptä¼˜åŒ–ï¼š**
- å‡å°‘å’Œæ‹†åˆ†é•¿ä»»åŠ¡ï¼ˆ< 50msï¼‰
- ä½¿ç”¨ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½
- å»¶è¿ŸåŠ è½½éå…³é”®JavaScript
- ä¼˜åŒ–ç¬¬ä¸‰æ–¹è„šæœ¬åŠ è½½æ—¶æœº

**äº¤äº’ä¼˜åŒ–ï¼š**
- ä½¿ç”¨äº‹ä»¶å§”æ‰˜å‡å°‘ç›‘å¬å™¨
- é¿å…åŒæ­¥æ“ä½œé˜»å¡ä¸»çº¿ç¨‹
- ä½¿ç”¨Web Workerså¤„ç†é‡è®¡ç®—
- ä¼˜åŒ–äº‹ä»¶å¤„ç†å‡½æ•°æ€§èƒ½

**CLSï¼ˆç´¯ç§¯å¸ƒå±€åç§»ï¼‰ä¼˜åŒ–ï¼š**

**å¸ƒå±€ç¨³å®šæ€§ï¼š**
- ä¸ºåª’ä½“å…ƒç´ è®¾ç½®æ˜ç¡®å°ºå¯¸
- ä¸ºåŠ¨æ€å†…å®¹é¢„ç•™ç©ºé—´
- é¿å…åœ¨ç°æœ‰å†…å®¹ä¸Šæ–¹æ’å…¥å…ƒç´ 
- ä½¿ç”¨CSS aspect-ratioå±æ€§

**å­—ä½“ä¼˜åŒ–ï¼š**
- ä½¿ç”¨font-display: swapç­–ç•¥
- é¢„åŠ è½½å…³é”®å­—ä½“æ–‡ä»¶
- æä¾›åˆé€‚çš„å­—ä½“åå¤‡æ–¹æ¡ˆ
- é¿å…ä¸å¯è§æ–‡æœ¬é—ªçƒï¼ˆFOITï¼‰

### ç›‘æ§é©±åŠ¨çš„ä¼˜åŒ–æµç¨‹

**1. é—®é¢˜è¯†åˆ«**
- é€šè¿‡ç›‘æ§æ•°æ®å‘ç°æ€§èƒ½é—®é¢˜
- åˆ†æé—®é¢˜å½±å“èŒƒå›´å’Œä¸¥é‡ç¨‹åº¦
- ç¡®å®šä¼˜åŒ–ä¼˜å…ˆçº§

**2. æ ¹å› åˆ†æ**
- æ·±å…¥åˆ†ææ€§èƒ½ç“¶é¢ˆæ ¹æœ¬åŸå› 
- ç»“åˆç”¨æˆ·è¡Œä¸ºæ•°æ®åˆ†æå½±å“
- è¯„ä¼°ä¸åŒä¼˜åŒ–æ–¹æ¡ˆçš„å¯è¡Œæ€§

**3. ä¼˜åŒ–å®æ–½**
- åˆ¶å®šè¯¦ç»†çš„ä¼˜åŒ–è®¡åˆ’
- åˆ†é˜¶æ®µå®æ–½ä¼˜åŒ–æªæ–½
- å»ºç«‹ä¼˜åŒ–æ•ˆæœè¯„ä¼°æœºåˆ¶

**4. æ•ˆæœéªŒè¯**
- é€šè¿‡A/Bæµ‹è¯•éªŒè¯ä¼˜åŒ–æ•ˆæœ
- ç›‘æ§å…³é”®æŒ‡æ ‡å˜åŒ–
- è¯„ä¼°ä¸šåŠ¡å½±å“å’Œç”¨æˆ·ä½“éªŒæ”¹å–„

**5. æŒç»­æ”¹è¿›**
- å»ºç«‹æ€§èƒ½ä¼˜åŒ–çš„é•¿æ•ˆæœºåˆ¶
- å®šæœŸå›é¡¾å’Œè°ƒæ•´ä¼˜åŒ–ç­–ç•¥
- åŸ¹å…»å›¢é˜Ÿçš„æ€§èƒ½æ„è¯†
```

## æ€»ç»“

**æ„å»ºå®Œæ•´çš„æ€§èƒ½ç›‘æ§ä½“ç³»**

å‰ç«¯æ€§èƒ½ç›‘æ§æ˜¯ä¸€ä¸ªç³»ç»Ÿæ€§å·¥ç¨‹ï¼Œéœ€è¦ä»æŠ€æœ¯ã€æµç¨‹ã€æ–‡åŒ–ç­‰å¤šä¸ªç»´åº¦è¿›è¡Œå»ºè®¾ï¼š

**æŠ€æœ¯å±‚é¢ï¼š**
- å»ºç«‹å…¨é¢çš„æŒ‡æ ‡ç›‘æ§ä½“ç³»
- å®æ–½æ™ºèƒ½çš„æ•°æ®æ”¶é›†å’Œåˆ†æ
- æ„å»ºå®æ—¶çš„å‘Šè­¦å’Œé€šçŸ¥æœºåˆ¶
- æä¾›ç›´è§‚çš„æ•°æ®å¯è§†åŒ–ç•Œé¢

**æµç¨‹å±‚é¢ï¼š**
- å»ºç«‹æ€§èƒ½ç›‘æ§çš„æ ‡å‡†æµç¨‹
- åˆ¶å®šæ˜ç¡®çš„æ€§èƒ½ç›®æ ‡å’ŒSLA
- å»ºç«‹é—®é¢˜å“åº”å’Œå¤„ç†æœºåˆ¶
- å®æ–½æŒç»­çš„æ€§èƒ½ä¼˜åŒ–æµç¨‹

**æ–‡åŒ–å±‚é¢ï¼š**
- åŸ¹å…»å›¢é˜Ÿçš„æ€§èƒ½æ„è¯†
- å»ºç«‹æ•°æ®é©±åŠ¨çš„å†³ç­–æ–‡åŒ–
- é¼“åŠ±æŒç»­å­¦ä¹ å’Œæ”¹è¿›
- å»ºç«‹æ€§èƒ½ä¼˜åŒ–çš„æ¿€åŠ±æœºåˆ¶

**ä¸šåŠ¡ä»·å€¼ï¼š**

é€šè¿‡ç³»ç»Ÿæ€§çš„æ€§èƒ½ç›‘æ§ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ï¼š
- **ç”¨æˆ·ä½“éªŒæå‡**ï¼šæ›´å¿«çš„åŠ è½½é€Ÿåº¦ï¼Œæ›´æµç•…çš„äº¤äº’ä½“éªŒ
- **ä¸šåŠ¡æŒ‡æ ‡æ”¹å–„**ï¼šæé«˜è½¬åŒ–ç‡ï¼Œé™ä½è·³å‡ºç‡ï¼Œå¢åŠ ç”¨æˆ·ç•™å­˜
- **æˆæœ¬æ•ˆç›Šä¼˜åŒ–**ï¼šå‡å°‘èµ„æºæµªè´¹ï¼Œæé«˜ç³»ç»Ÿæ•ˆç‡
- **ç«äº‰ä¼˜åŠ¿å»ºç«‹**ï¼šåœ¨æ€§èƒ½æ–¹é¢é¢†å…ˆç«äº‰å¯¹æ‰‹

æ€§èƒ½ç›‘æ§ä¸æ˜¯ä¸€æ¬¡æ€§çš„å·¥ä½œï¼Œè€Œæ˜¯éœ€è¦æŒç»­æŠ•å…¥å’Œæ”¹è¿›çš„é•¿æœŸè¿‡ç¨‹ã€‚åªæœ‰å»ºç«‹å®Œå–„çš„ç›‘æ§ä½“ç³»ï¼Œå¹¶å°†å…¶ä¸ä¸šåŠ¡ç›®æ ‡ç´§å¯†ç»“åˆï¼Œæ‰èƒ½çœŸæ­£å‘æŒ¥æ€§èƒ½ç›‘æ§çš„ä»·å€¼ï¼Œä¸ºç”¨æˆ·æä¾›å“è¶Šçš„ä½“éªŒï¼Œä¸ºä¸šåŠ¡åˆ›é€ æŒç»­çš„ä»·å€¼ã€‚

## å®è·µæ¼”ç¤º

ä¸ºäº†å¸®åŠ©å¤§å®¶æ›´å¥½åœ°ç†è§£å‰ç«¯æ€§èƒ½ç›‘æ§çš„å®é™…åº”ç”¨ï¼Œæˆ‘ä»¬ç‰¹åˆ«åˆ›å»ºäº†ä¸€ä¸ª **[æ€§èƒ½ç›‘æ§å®æ—¶æ¼”ç¤ºé¡µé¢](/performance-demo)**ã€‚

**æ¼”ç¤ºåŠŸèƒ½åŒ…æ‹¬ï¼š**
- ğŸ” **å®æ—¶Web Vitalsç›‘æ§**ï¼šLCPã€FIDã€CLSç­‰æ ¸å¿ƒæŒ‡æ ‡çš„å®æ—¶ç›‘æµ‹
- ğŸ“Š **æ€§èƒ½æ•°æ®å¯è§†åŒ–**ï¼šç›´è§‚å±•ç¤ºå„é¡¹æ€§èƒ½æŒ‡æ ‡å’Œè¯„çº§
- ğŸ“ **ç›‘æ§æ—¥å¿—è®°å½•**ï¼šå®æ—¶æ˜¾ç¤ºPerformanceObserverçš„å·¥ä½œè¿‡ç¨‹
- ğŸ§ª **æ€§èƒ½æµ‹è¯•å·¥å…·**ï¼šä¸€é”®è§¦å‘æ€§èƒ½æµ‹è¯•ï¼ŒæŸ¥çœ‹å„é¡¹æŒ‡æ ‡å˜åŒ–
- ğŸ“‹ **Paintäº‹ä»¶ç›‘æ§**ï¼šå±•ç¤ºé¦–æ¬¡ç»˜åˆ¶(FP)å’Œé¦–æ¬¡å†…å®¹ç»˜åˆ¶(FCP)çš„è¯¦ç»†æ•°æ®

é€šè¿‡è¿™ä¸ªæ¼”ç¤ºé¡µé¢ï¼Œä½ å¯ä»¥ï¼š
1. **ç›´è§‚ç†è§£**å„é¡¹æ€§èƒ½æŒ‡æ ‡çš„å«ä¹‰å’Œè®¡ç®—æ–¹å¼
2. **å®æ—¶è§‚å¯Ÿ**PerformanceObserver APIçš„å·¥ä½œæœºåˆ¶
3. **ä½“éªŒå®Œæ•´**çš„æ€§èƒ½ç›‘æ§æ•°æ®æ”¶é›†å’Œå±•ç¤ºæµç¨‹
4. **å­¦ä¹ å®è·µ**å¦‚ä½•åœ¨å®é™…é¡¹ç›®ä¸­é›†æˆæ€§èƒ½ç›‘æ§åŠŸèƒ½

> ğŸ’¡ **å»ºè®®**ï¼šå»ºè®®åœ¨ä¸åŒçš„ç½‘ç»œç¯å¢ƒå’Œè®¾å¤‡ä¸Šè®¿é—®æ¼”ç¤ºé¡µé¢ï¼Œè§‚å¯Ÿæ€§èƒ½æŒ‡æ ‡çš„å˜åŒ–ï¼Œè¿™å°†å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£æ€§èƒ½ç›‘æ§åœ¨å®é™…åº”ç”¨ä¸­çš„ä»·å€¼ã€‚